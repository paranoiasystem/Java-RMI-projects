package com.marcoferraioli.server;

import com.marcoferraioli.client.Client;
import java.rmi.server.*;
import java.rmi.RemoteException;
import java.util.ArrayList;
import java.util.logging.Logger;

public class ServerImpl extends UnicastRemoteObject implements Server {
	
	private static final long serialVersionUID = 1L;
	static Logger logger = Logger.getLogger("global");
	
	ArrayList<Client> clientList = new ArrayList<Client>();
	
	protected ServerImpl() throws RemoteException {
		super();
		// TODO Auto-generated constructor stub
	}

	@Override
	public void dici(String username, String message) throws RemoteException {
		for (Client client : clientList) {
			client.detto(username, message);
		}		
	}

	@Override
	public void iscrivi(Client id, String username) throws RemoteException {
		logger.info("\nEntra nel server" + username);
		for (Client client : clientList) {
			client.iscritto(username);
		}
		clientList.add(id);
	}

	@Override
	public void abbandona(Client id, String username) throws RemoteException {
		// TODO Auto-generated method stub
		
	}

}
